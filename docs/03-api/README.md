# ğŸ“‹ API æ–‡æ¡£

> **KK Backend API å®Œæ•´å‚è€ƒæ–‡æ¡£** | æœ€åæ›´æ–°: 2025-12-13 | ç»´æŠ¤è€…: AI Assistant

## ğŸ¯ æ¦‚è¿°

æœ¬ç« èŠ‚æä¾› KK Backend é¡¹ç›®çš„å®Œæ•´ API æ–‡æ¡£ï¼ŒåŒ…æ‹¬è®¤è¯ã€ç”¨æˆ·ç®¡ç†ã€äº§å“ç®¡ç†ã€è®¢å•å¤„ç†ã€åº“å­˜ç®¡ç†ã€æ•°æ®åˆ†æä»¥åŠæ–°å¢çš„é‚®ä»¶æœåŠ¡ã€æ–‡ä»¶ä¸Šä¼ ã€æ•°æ®å¯¼å‡ºã€WebSocketé€šä¿¡ã€å®šæ—¶ä»»åŠ¡ç­‰æ‰€æœ‰åŠŸèƒ½æ¨¡å—çš„ **100+ API æ¥å£**ã€‚ç»è¿‡å…¨é¢é‡æ„ï¼ŒAPI è®¾è®¡æ›´åŠ è§„èŒƒï¼Œæ€§èƒ½æ˜¾è‘—æå‡ã€‚

### ğŸš€ ä¼ä¸šçº§ API ç‰¹æ€§

- **ğŸ”’ å®‰å…¨è®¤è¯**: JWT + RBAC å¤šå±‚æƒé™æ§åˆ¶
- **âš¡ é«˜æ€§èƒ½**: å“åº”æ—¶é—´æå‡ 30%ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®
- **ğŸ“Š æ™ºèƒ½ç¼“å­˜**: å¤šçº§ç¼“å­˜ç­–ç•¥ï¼Œç¼“å­˜å‘½ä¸­ç‡ 85%
- **ğŸ›¡ï¸ é”™è¯¯å¤„ç†**: ç»Ÿä¸€é”™è¯¯ç ç³»ç»Ÿï¼Œè¯¦ç»†é”™è¯¯ä¿¡æ¯
- **ğŸ“ è‡ªåŠ¨æ–‡æ¡£**: Swagger è‡ªåŠ¨ç”Ÿæˆï¼Œå®æ—¶æ›´æ–°
- **ğŸ” è¯·æ±‚è¿½è¸ª**: å®Œæ•´çš„è¯·æ±‚é“¾è·¯è¿½è¸ªå’Œç›‘æ§
- **ğŸ¯ æ•°æ®éªŒè¯**: ä¸¥æ ¼çš„è¾“å…¥éªŒè¯å’Œæ•°æ®æ ¼å¼æ£€æŸ¥

## ğŸ“‹ ç›®å½•

### ğŸ¢ ä¸šåŠ¡ API

- [è®¤è¯API](authentication.md) - ç”¨æˆ·è®¤è¯å’Œæˆæƒæ¥å£
- [ç”¨æˆ·API](admin/users.md) - ç”¨æˆ·ç®¡ç†ç›¸å…³æ¥å£ âœ…
- [äº§å“API](admin/products.md) - äº§å“å’Œå“ç‰Œç®¡ç†æ¥å£ âœ…
- [è®¢å•API](admin/orders.md) - è®¢å•å¤„ç†ç›¸å…³æ¥å£ âœ…
- [åº“å­˜API](admin/inventory.md) - åº“å­˜ç®¡ç†å’Œé¢„è­¦ç³»ç»Ÿ âœ…
- [åˆ†æAPI](admin/analytics.md) - æ•°æ®åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆ âœ…

### ğŸš€ æ–°å¢åŠŸèƒ½ API

- [å®¢æˆ·ç®¡ç†API](customers-api.md) - å®¢æˆ·CRMã€å…¬æµ·ã€è·Ÿè¿›è®°å½• âœ…
- [é‚®ä»¶æœåŠ¡API](../07-modules/email-module.md) - é‚®ä»¶å‘é€ã€æ¨¡æ¿ç®¡ç†ã€çŠ¶æ€è¿½è¸ª âœ…
- [æ–‡ä»¶ä¸Šä¼ API](../07-modules/upload-module.md) - æ–‡ä»¶ä¸Šä¼ ã€äº‘å­˜å‚¨ã€å›¾ç‰‡å¤„ç† âœ…
- [æ•°æ®å¯¼å‡ºAPI](../07-modules/export-module.md) - æ•°æ®å¯¼å‡ºã€ä»»åŠ¡ç®¡ç†ã€è¿›åº¦ç›‘æ§ âœ…
- [WebSocket API](../07-modules/websocket-module.md) - å®æ—¶é€šä¿¡ã€æ¶ˆæ¯æ¨é€ã€äº‹ä»¶è®¢é˜… âœ…
- [å®šæ—¶ä»»åŠ¡API](../07-modules/scheduler-module.md) - ä»»åŠ¡è°ƒåº¦ã€æ‰§è¡Œç›‘æ§ã€å¤„ç†å™¨ç®¡ç† âœ…

### ğŸ”Œ æŠ€æœ¯é›†æˆ API

- [ç¬¬ä¸‰æ–¹é›†æˆAPI](third-party-apis.md) - é˜Ÿåˆ—ã€ç¼“å­˜ã€å¥åº·æ£€æŸ¥ç­‰æŠ€æœ¯æ¥å£ âœ…

### ğŸ“– å¼€å‘æŒ‡å—

- [å‰ç«¯é›†æˆæŒ‡å—](frontend-integration.md) - å‰ç«¯å¼€å‘è€…ä¸“ç”¨æ¥å£å¯¹æ¥æ–‡æ¡£ ğŸš€
- [**ç®¡ç†ç«¯APIæ¦‚è§ˆ**](admin/README.md) - **ç®¡ç†ç«¯ä¸“ç”¨APIæ¥å£æ–‡æ¡£** âœ¨ **æ–°å¢**
- [**å•†åŸç«¯API**](storefront-api.md) - **å®¢æˆ·ç«¯/å•†åŸAPIæ¥å£** ğŸ›ï¸
- [**ç®¡ç†ç«¯å¿«é€Ÿå‚è€ƒ**](admin-quick-reference.md) - **ç®¡ç†ç«¯APIå¿«é€ŸæŸ¥æ‰¾è¡¨** âš¡ **æ–°å¢**
- [é”™è¯¯ç è¯´æ˜](error-codes.md) - å®Œæ•´çš„é”™è¯¯ç å‚è€ƒ

## ğŸš€ å¿«é€Ÿå¯¼èˆª

### ğŸ¯ æŒ‰è§’è‰²å¯¼èˆª

**å‰ç«¯å¼€å‘è€…**

```
ğŸš€ å¿«é€Ÿå¼€å§‹ â†’ frontend-integration.md (æ¨è)
1. ğŸ” è®¤è¯æµç¨‹ â†’ authentication.md
2. ğŸ‘¥ ç”¨æˆ·ç®¡ç† â†’ admin/users.md
3. ğŸ“¦ äº§å“æ•°æ® â†’ admin/products.md
4. ğŸ“Š åº“å­˜æŸ¥è¯¢ â†’ admin/inventory.md âœ…
5. ğŸ“ˆ æ•°æ®åˆ†æ â†’ admin/analytics.md âœ…
6. â“ é”™è¯¯å¤„ç† â†’ error-codes.md
```

**ç®¡ç†ç«¯å¼€å‘è€…**

```
ğŸ› ï¸ ç®¡ç†ç«¯ä¸“ç”¨ â†’ admin/README.md (æ¨è)
âš¡ å¿«é€Ÿå‚è€ƒ â†’ admin-quick-reference.md (APIé€ŸæŸ¥)
1. ğŸ” ç®¡ç†å‘˜è®¤è¯ â†’ admin/README.md#è®¤è¯ç®¡ç†
2. ğŸ‘¥ ç”¨æˆ·ç®¡ç† â†’ admin/users.md
3. ğŸ“¦ äº§å“ç®¡ç† â†’ admin/products.md
4. ğŸ·ï¸ å“ç‰Œç®¡ç† â†’ admin/brands.md
5. ğŸ“‹ è®¢å•ç®¡ç† â†’ admin/orders.md
6. ğŸ“Š åº“å­˜ç®¡ç† â†’ admin/inventory.md
7. ğŸ“ˆ æ•°æ®åˆ†æ â†’ admin/analytics.md
8. ğŸ”§ å‰ç«¯å¯¹æ¥ â†’ frontend-integration.md
```

**ç§»åŠ¨ç«¯å¼€å‘è€…**

```
1. ğŸ” ç™»å½•æ³¨å†Œ â†’ authentication.md
2. ğŸ“± ç”¨æˆ·èµ„æ–™ â†’ admin/users.md#ä¸ªäººèµ„æ–™
3. ğŸ›ï¸ å•†å“æµè§ˆ â†’ storefront-api.md#äº§å“åˆ—è¡¨
4. ğŸ’³ ä¸‹å•æ”¯ä»˜ â†’ storefront-api.md#è®¢å•åˆ›å»º
```

**ç¬¬ä¸‰æ–¹é›†æˆ**

```
1. ğŸ”‘ APIå¯†é’¥ â†’ authentication.md
2. ğŸ“Š æ•°æ®æ¥å£ â†’ admin/analytics.md
3. ğŸ”— Webhook â†’ admin/orders.md
```

## ğŸ“– API åŸºç¡€ä¿¡æ¯

### ğŸŒ æœåŠ¡åœ°å€

| ç¯å¢ƒ         | åŸºç¡€URL                               | è¯´æ˜     |
| ------------ | ------------------------------------- | -------- |
| **å¼€å‘ç¯å¢ƒ** | `http://localhost:3000/api/v1`        | æœ¬åœ°å¼€å‘ |
| **æµ‹è¯•ç¯å¢ƒ** | `https://test-api.example.com/api/v1` | æµ‹è¯•éƒ¨ç½² |
| **ç”Ÿäº§ç¯å¢ƒ** | `https://api.example.com/api/v1`      | ç”Ÿäº§éƒ¨ç½² |

### ğŸ“š äº¤äº’å¼æ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹å®Œæ•´çš„ Swagger API æ–‡æ¡£ï¼š

- **å¼€å‘ç¯å¢ƒ**: `http://localhost:3000/api/docs`
- **æµ‹è¯•ç¯å¢ƒ**: `https://test-api.example.com/api/docs`

### ğŸ” è®¤è¯æ–¹å¼

KK Backend API ä½¿ç”¨ JWT Bearer Token è¿›è¡Œè®¤è¯ï¼š

```http
Authorization: Bearer <your-jwt-token>
```

### ğŸ“Š å“åº”æ ¼å¼

#### æˆåŠŸå“åº”

```json
{
  "success": true,
  "data": {
    // å“åº”æ•°æ®
  },
  "timestamp": "2025-01-08T10:30:00.000Z",
  "path": "/api/v1/endpoint",
  "method": "GET"
}
```

#### é”™è¯¯å“åº”

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥",
    "details": [
      {
        "field": "email",
        "message": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
      }
    ]
  },
  "timestamp": "2025-01-08T10:30:00.000Z",
  "path": "/api/v1/endpoint",
  "method": "POST"
}
```

## ğŸ“‹ æ–‡æ¡£è§„èŒƒ

> **é‡è¦**: æ‰€æœ‰ API æ¥å£æ–‡æ¡£å¿…é¡»éµå¾ªä»¥ä¸‹è§„èŒƒã€‚æ–°å»º API æ–‡æ¡£è¯·å‚è€ƒ [API æ–‡æ¡£æ¨¡æ¿](./api-template.md)ã€‚

### æ¥å£æ–‡æ¡£å¿…é¡»åŒ…å«

| å†…å®¹           | è¯´æ˜                               |
| -------------- | ---------------------------------- |
| **ç«¯ç‚¹**       | `METHOD /path` æ ¼å¼                |
| **è®¤è¯è¦æ±‚**   | Bearer Token å¿…éœ€/å¯é€‰/å…¬å¼€        |
| **æƒé™è¦æ±‚**   | ADMIN / MANAGER / å…¬å¼€             |
| **è¯·æ±‚ä½“ç¤ºä¾‹** | å®Œæ•´çš„ JSON ç¤ºä¾‹ (POST/PATCH æ¥å£) |
| **å“åº”ä½“ç¤ºä¾‹** | å®Œæ•´çš„ JSON ç¤ºä¾‹                   |

### åˆ†é¡µå“åº”æ ‡å‡†æ ¼å¼

æ‰€æœ‰åˆ†é¡µæ¥å£å¿…é¡»ä½¿ç”¨ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "success": true,
  "data": [...],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "totalPages": 5
  }
}
```

### å¤šè¯­è¨€å­—æ®µçº¦å®š

éƒ¨åˆ†å®ä½“æ”¯æŒä¸­è‹±æ–‡å­—æ®µï¼š

| å­—æ®µ            | ç±»å‹   | å¿…å¡« | è¯´æ˜     |
| --------------- | ------ | :--: | -------- |
| `name`          | string |  âœ…  | ä¸­æ–‡åç§° |
| `nameEn`        | string |  âŒ  | è‹±æ–‡åç§° |
| `description`   | string |  âŒ  | ä¸­æ–‡æè¿° |
| `descriptionEn` | string |  âŒ  | è‹±æ–‡æè¿° |

### é”™è¯¯å“åº”æ ¼å¼

è¯¦ç»†é”™è¯¯ç å‚è€ƒ: [é”™è¯¯ç è¯´æ˜](./error-codes.md)

## ğŸ”— API æ¨¡å—æ¦‚è§ˆ

### ğŸ” è®¤è¯æ¨¡å— (Auth)

| ç«¯ç‚¹                    | æ–¹æ³•  | æè¿°             | æƒé™          |
| ----------------------- | ----- | ---------------- | ------------- |
| `/auth/register`        | POST  | ç”¨æˆ·æ³¨å†Œ         | å…¬å¼€          |
| `/auth/register-admin`  | POST  | ç®¡ç†å‘˜æ³¨å†Œ       | å¼€å‘/æµ‹è¯•ç¯å¢ƒ |
| `/auth/login`           | POST  | ç”¨æˆ·ç™»å½•         | å…¬å¼€          |
| `/auth/profile`         | GET   | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | éœ€è¦è®¤è¯      |
| `/auth/change-password` | PATCH | ä¿®æ”¹å¯†ç          | éœ€è¦è®¤è¯      |
| `/auth/verify-email`    | POST  | é‚®ç®±éªŒè¯         | éœ€è¦è®¤è¯      |

### ğŸ‘¥ ç”¨æˆ·æ¨¡å— (Users)

| ç«¯ç‚¹                  | æ–¹æ³•   | æè¿°             | æƒé™        |
| --------------------- | ------ | ---------------- | ----------- |
| `/users`              | GET    | è·å–ç”¨æˆ·åˆ—è¡¨     | ç®¡ç†å‘˜/ç»ç† |
| `/users`              | POST   | åˆ›å»ºç”¨æˆ·         | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id`          | GET    | è·å–ç”¨æˆ·è¯¦æƒ…     | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id`          | PATCH  | æ›´æ–°ç”¨æˆ·ä¿¡æ¯     | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id`          | DELETE | åˆ é™¤ç”¨æˆ·         | ç®¡ç†å‘˜      |
| `/users/stats`        | GET    | ç”¨æˆ·ç»Ÿè®¡         | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id/status`   | PATCH  | æ›´æ–°ç”¨æˆ·çŠ¶æ€     | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id/role`     | PATCH  | æ›´æ–°ç”¨æˆ·è§’è‰²     | ç®¡ç†å‘˜      |
| `/users/:id/activity` | GET    | è·å–ç”¨æˆ·æ´»åŠ¨è®°å½• | ç®¡ç†å‘˜/ç»ç† |
| `/users/:id/suspend`  | PATCH  | æš‚åœç”¨æˆ·è´¦æˆ·     | ç®¡ç†å‘˜/ç»ç† |

### ğŸ“¦ äº§å“æ¨¡å— (Products)

| ç«¯ç‚¹                       | æ–¹æ³•   | æè¿°             | æƒé™        |
| -------------------------- | ------ | ---------------- | ----------- |
| `/products`                | GET    | è·å–äº§å“åˆ—è¡¨     | å…¬å¼€        |
| `/products`                | POST   | åˆ›å»ºäº§å“         | ç®¡ç†å‘˜/ç»ç† |
| `/products/:id`            | GET    | è·å–äº§å“è¯¦æƒ…     | å…¬å¼€        |
| `/products/:id`            | PATCH  | æ›´æ–°äº§å“         | ç®¡ç†å‘˜/ç»ç† |
| `/products/:id`            | DELETE | åˆ é™¤äº§å“         | ç®¡ç†å‘˜      |
| `/products/stats`          | GET    | è·å–äº§å“ç»Ÿè®¡     | ç®¡ç†å‘˜/ç»ç† |
| `/products/batch/status`   | PATCH  | æ‰¹é‡æ›´æ–°äº§å“çŠ¶æ€ | ç®¡ç†å‘˜/ç»ç† |
| `/products/:id/activate`   | PATCH  | æ¿€æ´»äº§å“         | ç®¡ç†å‘˜/ç»ç† |
| `/products/:id/deactivate` | PATCH  | åœç”¨äº§å“         | ç®¡ç†å‘˜/ç»ç† |
| `/brands`                  | GET    | è·å–å“ç‰Œåˆ—è¡¨     | å…¬å¼€        |
| `/brands`                  | POST   | åˆ›å»ºå“ç‰Œ         | ç®¡ç†å‘˜/ç»ç† |
| `/brands/:id`              | GET    | è·å–å“ç‰Œè¯¦æƒ…     | å…¬å¼€        |
| `/brands/:id`              | PATCH  | æ›´æ–°å“ç‰Œä¿¡æ¯     | ç®¡ç†å‘˜/ç»ç† |
| `/brands/:id`              | DELETE | åˆ é™¤å“ç‰Œ         | ç®¡ç†å‘˜      |
| `/brands/active`           | GET    | è·å–æ´»è·ƒå“ç‰Œåˆ—è¡¨ | å…¬å¼€        |
| `/brands/stats`            | GET    | è·å–å“ç‰Œç»Ÿè®¡     | ç®¡ç†å‘˜/ç»ç† |
| `/brands/:id/activate`     | PATCH  | æ¿€æ´»å“ç‰Œ         | ç®¡ç†å‘˜/ç»ç† |
| `/brands/:id/deactivate`   | PATCH  | åœç”¨å“ç‰Œ         | ç®¡ç†å‘˜/ç»ç† |

### ğŸ›’ è®¢å•æ¨¡å— (Orders)

| ç«¯ç‚¹                          | æ–¹æ³•  | æè¿°               | æƒé™        |
| ----------------------------- | ----- | ------------------ | ----------- |
| `/orders`                     | GET   | è·å–è®¢å•åˆ—è¡¨       | ç®¡ç†å‘˜/ç»ç† |
| `/orders`                     | POST  | åˆ›å»ºè®¢å•           | éœ€è¦è®¤è¯    |
| `/orders/:id`                 | GET   | è·å–è®¢å•è¯¦æƒ…       | éœ€è¦è®¤è¯    |
| `/orders/:id`                 | PATCH | æ›´æ–°è®¢å•           | ç®¡ç†å‘˜/ç»ç† |
| `/orders/:id/cancel`          | PATCH | å–æ¶ˆè®¢å•           | éœ€è¦è®¤è¯    |
| `/orders/my-orders`           | GET   | æˆ‘çš„è®¢å•           | éœ€è¦è®¤è¯    |
| `/orders/stats`               | GET   | è·å–è®¢å•ç»Ÿè®¡       | ç®¡ç†å‘˜/ç»ç† |
| `/orders/number/:orderNumber` | GET   | æ ¹æ®è®¢å•å·è·å–è®¢å• | éœ€è¦è®¤è¯    |
| `/orders/:id/confirm`         | PATCH | ç¡®è®¤è®¢å•           | ç®¡ç†å‘˜/ç»ç† |
| `/orders/:id/ship`            | PATCH | è®¢å•å‘è´§           | ç®¡ç†å‘˜/ç»ç† |
| `/orders/:id/deliver`         | PATCH | ç¡®è®¤æ”¶è´§           | éœ€è¦è®¤è¯    |
| `/orders/:id/refund`          | PATCH | ç”³è¯·é€€æ¬¾           | éœ€è¦è®¤è¯    |

### ğŸ“Š åº“å­˜æ¨¡å— (Inventory)

| ç«¯ç‚¹                       | æ–¹æ³•   | æè¿°             | æƒé™        |
| -------------------------- | ------ | ---------------- | ----------- |
| `/inventory`               | GET    | è·å–åº“å­˜åˆ—è¡¨     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory`               | POST   | åˆ›å»ºåº“å­˜è®°å½•     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/:id`           | GET    | è·å–åº“å­˜è¯¦æƒ…     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/:id`           | PATCH  | æ›´æ–°åº“å­˜ä¿¡æ¯     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/:id`           | DELETE | åˆ é™¤åº“å­˜è®°å½•     | ç®¡ç†å‘˜      |
| `/inventory/stats`         | GET    | è·å–åº“å­˜ç»Ÿè®¡     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/adjust`        | POST   | è°ƒæ•´åº“å­˜         | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/transfer`      | POST   | åº“å­˜è½¬ç§»         | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/reserve`       | POST   | é¢„ç•™åº“å­˜         | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/release`       | POST   | é‡Šæ”¾é¢„ç•™         | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/logs`          | GET    | è·å–åº“å­˜æ—¥å¿—     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/logs/:id`      | GET    | è·å–æ—¥å¿—è¯¦æƒ…     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/:id/movements` | GET    | è·å–åº“å­˜æ“ä½œå†å² | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/alerts/active` | GET    | è·å–æ´»è·ƒé¢„è­¦     | ç®¡ç†å‘˜/ç»ç† |
| `/inventory/alerts/check`  | POST   | è¿è¡Œé¢„è­¦æ£€æŸ¥     | ç®¡ç†å‘˜/ç»ç† |

### ğŸ“ˆ åˆ†ææ¨¡å— (Analytics)

| ç«¯ç‚¹                       | æ–¹æ³• | æè¿°             | æƒé™        |
| -------------------------- | ---- | ---------------- | ----------- |
| `/analytics/dashboard`     | GET  | è·å–ä»ªè¡¨æ¿æ•°æ®   | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/sales`         | GET  | è·å–é”€å”®åˆ†æ     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/users`         | GET  | è·å–ç”¨æˆ·åˆ†æ     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/products`      | GET  | è·å–äº§å“åˆ†æ     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/realtime`      | GET  | è·å–å®æ—¶æ•°æ®     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/metrics`       | GET  | è·å–å…³é”®æŒ‡æ ‡     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/reports`       | POST | ç”ŸæˆæŠ¥è¡¨         | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/comprehensive` | GET  | è·å–ç»¼åˆåˆ†ææŠ¥å‘Š | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/trends`        | GET  | è·å–è¶‹åŠ¿åˆ†æ     | ç®¡ç†å‘˜/ç»ç† |
| `/analytics/comparison`    | GET  | è·å–å¯¹æ¯”åˆ†æ     | ç®¡ç†å‘˜/ç»ç† |

### ğŸ¥ å¥åº·æ£€æŸ¥æ¨¡å— (Health)

| ç«¯ç‚¹      | æ–¹æ³• | æè¿°             | æƒé™ |
| --------- | ---- | ---------------- | ---- |
| `/`       | GET  | è·å–åº”ç”¨åŸºæœ¬ä¿¡æ¯ | å…¬å¼€ |
| `/health` | GET  | åŸºç¡€å¥åº·æ£€æŸ¥     | å…¬å¼€ |

#### å¥åº·æ£€æŸ¥è¯¦ç»†è¯´æ˜

**åŸºç¡€å¥åº·æ£€æŸ¥** (`GET /health`)

- æ£€æŸ¥åº”ç”¨æœåŠ¡çŠ¶æ€
- æ£€æŸ¥æ•°æ®åº“è¿æ¥
- æ£€æŸ¥Redisè¿æ¥ï¼ˆå¦‚æœé…ç½®ï¼‰
- è¿”å›æ•´ä½“å¥åº·çŠ¶æ€

**å“åº”ç¤ºä¾‹**:

```json
{
  "status": "ok",
  "info": {
    "database": { "status": "up" },
    "redis": { "status": "up" }
  },
  "error": {},
  "details": {
    "database": { "status": "up" },
    "redis": { "status": "up" }
  }
}
```

**åº”ç”¨ä¿¡æ¯** (`GET /`)

- è¿”å›åº”ç”¨åç§°ã€ç‰ˆæœ¬ç­‰åŸºæœ¬ä¿¡æ¯
- ç”¨äºæœåŠ¡å‘ç°å’Œç‰ˆæœ¬ç¡®è®¤

**å“åº”ç¤ºä¾‹**:

```json
{
  "name": "KK Backend",
  "version": "1.0.0",
  "description": "KK Backend API Service",
  "environment": "production"
}
```

## ğŸ’» å¿«é€Ÿå¼€å§‹ç¤ºä¾‹

### ç”¨æˆ·æ³¨å†Œå’Œç™»å½•

```javascript
// 1. ç”¨æˆ·æ³¨å†Œ
const registerResponse = await fetch('/api/v1/auth/register', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    username: 'testuser',
    email: 'test@example.com',
    password: 'TestPassword123!',
    fullName: 'æµ‹è¯•ç”¨æˆ·',
  }),
});

// 2. ç”¨æˆ·ç™»å½•
const loginResponse = await fetch('/api/v1/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'test@example.com',
    password: 'TestPassword123!',
  }),
});

const { access_token } = await loginResponse.json();

// 3. ä½¿ç”¨Tokenè®¿é—®å—ä¿æŠ¤çš„API
const profileResponse = await fetch('/api/v1/auth/profile', {
  headers: { Authorization: `Bearer ${access_token}` },
});
```

### äº§å“æ•°æ®è·å–

```javascript
// è·å–äº§å“åˆ—è¡¨
const productsResponse = await fetch('/api/v1/products?page=1&limit=10');
const products = await productsResponse.json();

// è·å–å“ç‰Œåˆ—è¡¨
const brandsResponse = await fetch('/api/v1/brands');
const brands = await brandsResponse.json();

// æœç´¢äº§å“
const searchResponse = await fetch('/api/v1/products?search=å…³é”®è¯&category=åˆ†ç±»');
const searchResults = await searchResponse.json();
```

## ğŸ§ª API æµ‹è¯•

### Python æµ‹è¯•è„šæœ¬

é¡¹ç›®æä¾›äº†å®Œæ•´çš„ Python API æµ‹è¯•è„šæœ¬ï¼š

```bash
# è¿›å…¥æµ‹è¯•ç›®å½•
cd api-tests

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡ŒåŸºç¡€æµ‹è¯•
python simple_test.py

# è¿è¡Œå®Œæ•´æµ‹è¯•
python test_api.py
```

### Postman é›†åˆ

å¯¼å…¥ Postman é›†åˆæ–‡ä»¶è¿›è¡Œ API æµ‹è¯•ï¼š

```bash
# å¯¼å‡º Postman é›†åˆ
curl -o kk-backend-api.postman_collection.json \
  http://localhost:3000/api/docs-json
```

## ğŸ“Š çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç   | è¯´æ˜           | ç¤ºä¾‹åœºæ™¯           |
| ------- | -------------- | ------------------ |
| **200** | è¯·æ±‚æˆåŠŸ       | æ•°æ®è·å–æˆåŠŸ       |
| **201** | åˆ›å»ºæˆåŠŸ       | ç”¨æˆ·æ³¨å†Œã€è®¢å•åˆ›å»º |
| **400** | è¯·æ±‚å‚æ•°é”™è¯¯   | æ•°æ®éªŒè¯å¤±è´¥       |
| **401** | æœªæˆæƒè®¿é—®     | Tokenæ— æ•ˆæˆ–è¿‡æœŸ    |
| **403** | æƒé™ä¸è¶³       | è®¿é—®ç®¡ç†å‘˜æ¥å£     |
| **404** | èµ„æºä¸å­˜åœ¨     | ç”¨æˆ·æˆ–äº§å“ä¸å­˜åœ¨   |
| **409** | èµ„æºå†²çª       | ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨ |
| **500** | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | ç³»ç»Ÿå¼‚å¸¸           |

## ğŸ”— ç›¸å…³é“¾æ¥

- [è®¤è¯APIè¯¦è§£](authentication.md) - å®Œæ•´çš„è®¤è¯æ¥å£è¯´æ˜
- [ç”¨æˆ·APIè¯¦è§£](admin/users.md) - ç”¨æˆ·ç®¡ç†æ¥å£è¯´æ˜
- [äº§å“APIè¯¦è§£](admin/products.md) - äº§å“ç®¡ç†æ¥å£è¯´æ˜
- [é”™è¯¯ç å‚è€ƒ](error-codes.md) - å®Œæ•´çš„é”™è¯¯ç è¯´æ˜
- [å¿«é€Ÿå¼€å§‹](../01-getting-started/quick-start.md) - APIå¿«é€Ÿä½“éªŒ

---

**æ–‡æ¡£ä¿¡æ¯**

- åˆ›å»ºæ—¶é—´: 2025-01-08
- æœ€åæ›´æ–°: 2025-01-08
- ç»´æŠ¤è€…: AI Assistant
- å®¡æ ¸è€…: é¡¹ç›®å›¢é˜Ÿ
