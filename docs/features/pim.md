# 商品管理 (PIM-lite) 需求说明

## 1. 模块范围

**目标**：提供轻量级商品主数据管理，支持结构化数据维护与媒体资源管理，作为销售端和推荐系统的核心数据源。

### 1.1 功能清单
- **商品列表**：搜索/筛选/分页/批量操作。
- **商品维护**：新建/编辑商品（基础信息、价格库存策略、属性、媒体）。
- **批量导入**：CSV 导入任务中心、错误报告下载。
- **媒体管理**：对象存储直传、图片/PDF 管理。
- **审核发布**：状态流转（Draft -> Published）。

## 2. 商品列表页

### 2.1 列表字段
- 缩略图、SKU、商品名、品牌、类目。
- 售价/原价。
- 上架状态 (Draft/Published/Unpublished)。
- 推荐状态标记。
- 更新时间、最后编辑人。

### 2.2 筛选与搜索
- 搜索：SKU / 名称 / 条码。
- 筛选：品牌、类目、上架状态、媒体完整性（无图/无PDF）。

### 2.3 批量操作
- 上架/下架、设置品牌/类目、打标签、导出 CSV。

## 3. 商品编辑页

### 3.1 基础信息
- SKU（唯一必填）、名称（多语言可选）、品牌、类目（多级）。
- 标签（Tags）：新品、促销、主推等。
- 描述：简短描述、富文本详细描述。

### 3.2 价格与可售策略
- 价格：零售价、原价。
- **可售策略**（决定推荐系统过滤逻辑）：
  - `allow_backorder`：允许预订（无库存时是否显示为 Backorder）。
  - `allow_transfer`：允许调货（本仓无货是否显示为 Transferable）。

### 3.3 媒体资源（对象存储直传）
- **图片**：多张上传、拖拽排序、设置封面。
- **PDF**：产品说明书、材质报告等文档上传。
- **技术实现**：
  - 前端请求后端获取 Presigned URL。
  - 前端直接 PUT 文件至对象存储 (S3)。
  - 上传完成后回调后端登记元数据。

## 4. 批量导入 (CSV)

### 4.1 导入流程
1. **下载模板**：提供标准 CSV 模板。
2. **上传文件**：上传 CSV。
3. **预校验**：检查 SKU 唯一性、必填字段、格式合法性。
4. **执行导入**：支持增量更新或覆盖。
5. **结果反馈**：显示成功/失败行数，支持下载 `errors.csv`（包含具体错误原因）。

### 4.2 核心字段
- 必填：`sku`, `name`, `brand`, `category`, `price`
- 可选：`allow_backorder`, `allow_transfer`, `tags`, `image_urls`

## 5. 审核与发布
- 默认导入/新建状态为 **Draft**。
- 只有 **Published** 状态商品才会进入销售端和推荐池。